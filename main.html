<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>游戏预测</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="https://unpkg.com/vue@3"></script>
    <script src="js/dealWith.js"></script>
</head>

<body>
<div id="app">
    <h1>近15次数字:<br>{{numbers.join(" ")}}</h1>
    <label>
        <input type="text" @input="validateInput" placeholder="请按顺序输入">
    </label>
    <div class="submitForm">
        <!--        <button @click="numbers[numbers.length]=''">下一个</button>-->
        <!--        <button @click="submitForm">提交</button>-->
    </div>
    <table v-for="row in 2" :key="row">
        <tr>
            <td :class="'g'+(bgC[(row - 1) * 5 + col-1]).toString()" v-for="col in 5" :key="col">
                {{(row - 1) * 5 + col - 1}}
            </td>
        </tr>
        <tr>
            <td :class="`hot`+ifHot((row - 1) * 5 + col-1)" v-for="col in 5"
                :key="col">
                出现 {{counts[(row - 1) * 5 + col - 1]}} 次
            </td>
        </tr>
        <tr>
            <td :class="`hot`+parseInt((inputValue.length-inputValue.lastIndexOf(((row - 1) * 5 + col - 1).toString())-1)/2).toString()"
                v-for="col in 5"
                :key="col">
                {{inputValue.length - inputValue.lastIndexOf(((row - 1) * 5 + col - 1).toString()) - 1}} 次 未出现
            </td>
        </tr>
    </table>
    <div class="msg">
        <p>预测压数:</p>
        <p v-for="m in msg_" :key="m">{{m}}</p>
    </div>

</div>

<script>
    const app = Vue.createApp({
        data() {
                return{
                    numbers: [],
                    inputValue: [],
                    bgC: new Array(10).fill(`0`),
                    msg_: [],
                    counts: new Array(10).fill(0),
                    hotMun_5:[],
                    hotMun_15:[],
                    coldMun_15:[],
                }
        },
        methods: {
            validateInput(event) {
                // this.msg_ =''
                this.inputValue = event.target.value.split('');
                this.numbers = this.inputValue.slice(-15)
                this.counts = []
                for (let i = 0; i < 15; i++) {
                    this.counts.push(this.numbers.filter(num => num === i.toString()).length)
                }
                console.log(this.counts)
                if (this.numbers.length===0){
                    this.hotMun = -1
                }else {
                    this.hotMun = this.findMaxIndex(this.counts)
                }
                dealWith(this.numbers, this.bgC, this.msg_,this.hotMun)
            },
            findMaxIndex(arr) {
                let max = arr[0];
                let maxIndex = 0;
                for (let i = 1; i < arr.length; i++) {
                    if (arr[i] > max) {
                        max = arr[i];
                        maxIndex = i;
                    }
                }
                return maxIndex;
            },
            ifHot(n) {
                // this.counts.slice(-10).filter(num => num >= 5).length
                if (n===0)return this.counts[0];
                // if (n === this.hotMun) {
                //     return "50"
                // }
                return this.counts[n]
            }
        }
    });

    app.mount('#app');
</script>
</body>

</html>